
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>MPipe API &mdash; MPipe Documentation</title>
    
    <link rel="stylesheet" href="_static/style.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="top" title="MPipe Documentation" href="index.html" />
    <link rel="next" title="About MPipe" href="about.html" />
    <link rel="prev" title="Filtering" href="examples3.html" />
 
    <style type="text/css">
      
    </style>

  </head>
  <body>
<div class="pageheader">
  <ul>
    <li><a href="index.html">Home</a></li>
    <li><a href="docs.html">Docs</a></li>
    <li><a href="#">API</a></li>
    <li><a href="about.html">About</a></li>
  </ul>
  <div>
    <a href="index.html">
      <img src="_static/mpipe.png" alt="Da logo, man." />
    </a>
  </div>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="about.html" title="About MPipe"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="examples3.html" title="Filtering"
             accesskey="P">previous</a> |</li>
  <li><a href="index.html">MPipe home</a>&nbsp;|</li>
  <li><a href="docs.html">Documentation</a> &raquo;</li>
 
      </ul>
    </div>

    <div class="document">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="module-mpipe">
<span id="name-api"></span><span id="api"></span><h1>MPipe API<a class="headerlink" href="#module-mpipe" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="mpipe.OrderedWorker">
<em class="property">class </em><tt class="descclassname">mpipe.</tt><tt class="descname">OrderedWorker</tt><a class="headerlink" href="#mpipe.OrderedWorker" title="Permalink to this definition">¶</a></dt>
<dd><p>An OrderedWorker object operates in a stage where the order 
of output results always matches that of corresponding input tasks.</p>
<p>A worker is linked to its two nearest neighbors &#8211; the previous 
worker and the next &#8211; all workers in the stage thusly connected
in circular fashion. 
Input tasks are fetched in this order. Before publishing its result, 
a worker first waits for its previous neighbor to do the same.</p>
<dl class="method">
<dt id="mpipe.OrderedWorker.doTask">
<tt class="descname">doTask</tt><big>(</big><em>task</em><big>)</big><a class="headerlink" href="#mpipe.OrderedWorker.doTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement this method in the subclass with work functionality
to be executed on each <em>task</em> object.
The implementation can publish the output result in one of two ways,
either by 1) calling <a class="reference internal" href="#mpipe.OrderedWorker.putResult" title="mpipe.OrderedWorker.putResult"><tt class="xref py py-meth docutils literal"><span class="pre">putResult()</span></tt></a> and returning <tt class="docutils literal"><span class="pre">None</span></tt>, or
2) returning the result (other than <tt class="docutils literal"><span class="pre">None</span></tt>.)</p>
</dd></dl>

<dl class="method">
<dt id="mpipe.OrderedWorker.doInit">
<tt class="descname">doInit</tt><big>(</big><big>)</big><a class="headerlink" href="#mpipe.OrderedWorker.doInit" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement this method in the subclass in case there&#8217;s need
for additional initialization after process startup.
Since this class inherits from <a class="reference external" href="http://docs.python.org/library/multiprocessing.html#multiprocessing.Process" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">multiprocessing.Process</span></tt></a>,
its constructor executes in the spawning process.
This method allows additional code to be run in the forked process,
before the worker begins processing input tasks.</p>
</dd></dl>

<dl class="method">
<dt id="mpipe.OrderedWorker.putResult">
<tt class="descname">putResult</tt><big>(</big><em>result</em>, <em>count=0</em><big>)</big><a class="headerlink" href="#mpipe.OrderedWorker.putResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Register the <em>result</em> by putting it on all the output tubes.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mpipe.UnorderedWorker">
<em class="property">class </em><tt class="descclassname">mpipe.</tt><tt class="descname">UnorderedWorker</tt><a class="headerlink" href="#mpipe.UnorderedWorker" title="Permalink to this definition">¶</a></dt>
<dd><p>An UnorderedWorker object operates independently of other
workers in the stage, fetching the first available task, and
publishing its result whenever it is done
(without coordinating with neighboring workers.)
Consequently, the order of output results may not match 
that of corresponding input tasks.</p>
<dl class="method">
<dt id="mpipe.UnorderedWorker.doTask">
<tt class="descname">doTask</tt><big>(</big><em>task</em><big>)</big><a class="headerlink" href="#mpipe.UnorderedWorker.doTask" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement this method in the subclass with work
to be executed on each <em>task</em> object.
The implementation can publish the output result in one of two ways,
either by 1) calling <a class="reference internal" href="#mpipe.UnorderedWorker.putResult" title="mpipe.UnorderedWorker.putResult"><tt class="xref py py-meth docutils literal"><span class="pre">putResult()</span></tt></a> and returning <tt class="docutils literal"><span class="pre">None</span></tt>, or
2) returning the result (other than <tt class="docutils literal"><span class="pre">None</span></tt>.)</p>
</dd></dl>

<dl class="method">
<dt id="mpipe.UnorderedWorker.doInit">
<tt class="descname">doInit</tt><big>(</big><big>)</big><a class="headerlink" href="#mpipe.UnorderedWorker.doInit" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement this method in the subclass in case there&#8217;s need
for additional initialization after process startup.
Since this class inherits from <a class="reference external" href="http://docs.python.org/library/multiprocessing.html#multiprocessing.Process" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">multiprocessing.Process</span></tt></a>,
its constructor executes in the spawning process.
This method allows additional code to be run in the forked process,
before the worker begins processing input tasks.</p>
</dd></dl>

<dl class="method">
<dt id="mpipe.UnorderedWorker.putResult">
<tt class="descname">putResult</tt><big>(</big><em>result</em>, <em>count=0</em><big>)</big><a class="headerlink" href="#mpipe.UnorderedWorker.putResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Register the <em>result</em> by putting it on all the output tubes.</p>
</dd></dl>

</dd></dl>

<hr class="docutils" />
<dl class="class">
<dt id="mpipe.Stage">
<em class="property">class </em><tt class="descclassname">mpipe.</tt><tt class="descname">Stage</tt><big>(</big><em>worker_class</em>, <em>size=1</em>, <em>disable_result=False</em>, <em>do_stop_task=False</em>, <em>**worker_args</em><big>)</big><a class="headerlink" href="#mpipe.Stage" title="Permalink to this definition">¶</a></dt>
<dd><p>The Stage is an assembly of workers of identical functionality.</p>
<p>Create a stage of workers of given <em>worker_class</em> implementation, 
with <em>size</em> indicating the number of workers within the stage.
<em>disable_result</em> overrides any result defined in worker implementation,
and does not propagate it downstream (equivalent to the worker
producing <tt class="docutils literal"><span class="pre">None</span></tt> result.)</p>
<p><em>do_stop_task</em> indicates whether the incoming &#8220;stop&#8221; signal (<tt class="docutils literal"><span class="pre">None</span></tt> value)
will actually be passed to the worker as a task. When using this option,
implement your worker so that, in addition to regular incoming tasks,
it handles the <tt class="docutils literal"><span class="pre">None</span></tt> value as well. This will be
the worker&#8217;s final task before the process exits.</p>
<p>Any worker initialization arguments are given in <em>worker_args</em>.</p>
<dl class="method">
<dt id="mpipe.Stage.link">
<tt class="descname">link</tt><big>(</big><em>next_stage</em><big>)</big><a class="headerlink" href="#mpipe.Stage.link" title="Permalink to this definition">¶</a></dt>
<dd><p>Link to the given downstream stage <em>next_stage</em>
by adding its input tube to the list of this stage&#8217;s output tubes.
Return this stage.</p>
</dd></dl>

<dl class="method">
<dt id="mpipe.Stage.put">
<tt class="descname">put</tt><big>(</big><em>task</em><big>)</big><a class="headerlink" href="#mpipe.Stage.put" title="Permalink to this definition">¶</a></dt>
<dd><p>Put <em>task</em> on the stage&#8217;s input tube.</p>
</dd></dl>

<dl class="method">
<dt id="mpipe.Stage.get">
<tt class="descname">get</tt><big>(</big><em>timeout=None</em><big>)</big><a class="headerlink" href="#mpipe.Stage.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve results from all the output tubes.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="mpipe.OrderedStage">
<em class="property">class </em><tt class="descclassname">mpipe.</tt><tt class="descname">OrderedStage</tt><big>(</big><em>target</em>, <em>size=1</em>, <em>disable_result=False</em><big>)</big><a class="headerlink" href="#mpipe.OrderedStage" title="Permalink to this definition">¶</a></dt>
<dd><p>A specialized <a class="reference internal" href="#mpipe.Stage" title="mpipe.Stage"><tt class="xref py py-class docutils literal"><span class="pre">Stage</span></tt></a>, 
internally creating <a class="reference internal" href="#mpipe.OrderedWorker" title="mpipe.OrderedWorker"><tt class="xref py py-class docutils literal"><span class="pre">OrderedWorker</span></tt></a> objects.</p>
<p>Constructor takes a function implementing 
<a class="reference internal" href="#mpipe.OrderedWorker.doTask" title="mpipe.OrderedWorker.doTask"><tt class="xref py py-meth docutils literal"><span class="pre">OrderedWorker.doTask()</span></tt></a>.</p>
</dd></dl>

<dl class="class">
<dt id="mpipe.UnorderedStage">
<em class="property">class </em><tt class="descclassname">mpipe.</tt><tt class="descname">UnorderedStage</tt><big>(</big><em>target</em>, <em>size=1</em>, <em>disable_result=False</em><big>)</big><a class="headerlink" href="#mpipe.UnorderedStage" title="Permalink to this definition">¶</a></dt>
<dd><p>A specialized <a class="reference internal" href="#mpipe.Stage" title="mpipe.Stage"><tt class="xref py py-class docutils literal"><span class="pre">Stage</span></tt></a>, 
internally creating <a class="reference internal" href="#mpipe.UnorderedWorker" title="mpipe.UnorderedWorker"><tt class="xref py py-class docutils literal"><span class="pre">UnorderedWorker</span></tt></a> objects.</p>
<p>Constructor takes a function implementing
<a class="reference internal" href="#mpipe.UnorderedWorker.doTask" title="mpipe.UnorderedWorker.doTask"><tt class="xref py py-meth docutils literal"><span class="pre">UnorderedWorker.doTask()</span></tt></a>.</p>
</dd></dl>

<hr class="docutils" />
<dl class="class">
<dt id="mpipe.Pipeline">
<em class="property">class </em><tt class="descclassname">mpipe.</tt><tt class="descname">Pipeline</tt><big>(</big><em>input_stage</em><big>)</big><a class="headerlink" href="#mpipe.Pipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>A pipeline of stages.</p>
<p>Constructor takes the root upstream stage.</p>
<dl class="method">
<dt id="mpipe.Pipeline.put">
<tt class="descname">put</tt><big>(</big><em>task</em><big>)</big><a class="headerlink" href="#mpipe.Pipeline.put" title="Permalink to this definition">¶</a></dt>
<dd><p>Put <em>task</em> on the pipeline.</p>
</dd></dl>

<dl class="method">
<dt id="mpipe.Pipeline.get">
<tt class="descname">get</tt><big>(</big><em>timeout=None</em><big>)</big><a class="headerlink" href="#mpipe.Pipeline.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Return result from the pipeline.</p>
</dd></dl>

<dl class="method">
<dt id="mpipe.Pipeline.results">
<tt class="descname">results</tt><big>(</big><big>)</big><a class="headerlink" href="#mpipe.Pipeline.results" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a generator to iterate over results from the pipeline.</p>
</dd></dl>

</dd></dl>

<hr class="docutils" />
<dl class="class">
<dt id="mpipe.FilterWorker">
<em class="property">class </em><tt class="descclassname">mpipe.</tt><tt class="descname">FilterWorker</tt><big>(</big><em>stages</em>, <em>max_tasks=1</em>, <em>drop_results=False</em>, <em>cache_results=False</em><big>)</big><a class="headerlink" href="#mpipe.FilterWorker" title="Permalink to this definition">¶</a></dt>
<dd><p>FilterWorker filters input to sub-pipelines.</p>
<p>Constructor takes an iterable of
<a class="reference internal" href="#mpipe.Stage" title="mpipe.Stage"><tt class="xref py py-class docutils literal"><span class="pre">Stage</span></tt></a> 
objects and creates one pipeline for each stage.
The filter then propagates its input task as input into each pipeline,
filtered by limiting the number of tasks allowed in the stream of a pipeline,
given as <em>max_tasks</em> parameter. Any task in excess is not added to
a topped-out pipeline.</p>
<p>For every input task (even tasks not propagated to sub-pipelines)
the filter stage produces a result.
By default, as its result, the filter stage produces a tuple (task, results) 
where results is a list of results from all pipelines, 
unless <em>drop_results</em> is True, in which case it ignores any 
sub-pipeline result, and propagates only the input task.</p>
<p>If <em>drop_results</em> is False, then <em>cache_results</em> flag may be used
to save (i.e. cache) last results from pipelines. These are then 
used as repeated pipeline results when a pipeline does not produce
a result upon the current input task.</p>
</dd></dl>

<dl class="class">
<dt id="mpipe.FilterStage">
<em class="property">class </em><tt class="descclassname">mpipe.</tt><tt class="descname">FilterStage</tt><big>(</big><em>stages</em>, <em>max_tasks=1</em>, <em>drop_results=False</em>, <em>cache_results=False</em>, <em>do_stop_task=True</em><big>)</big><a class="headerlink" href="#mpipe.FilterStage" title="Permalink to this definition">¶</a></dt>
<dd><p>Single worker stage running 
<a class="reference internal" href="#mpipe.FilterWorker" title="mpipe.FilterWorker"><tt class="xref py py-class docutils literal"><span class="pre">FilterWorker</span></tt></a>.</p>
</dd></dl>

</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="about.html" title="About MPipe"
             >next</a> |</li>
        <li class="right" >
          <a href="examples3.html" title="Filtering"
             >previous</a> |</li>
  <li><a href="index.html">MPipe home</a>&nbsp;|</li>
  <li><a href="docs.html">Documentation</a> &raquo;</li>
 
      </ul>
    </div>
  
    <div class="footer">
        &copy; Copyright 2013, Velimir Mlaker.
      Last updated on Jul 20, 2013.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>

  </body>
</html>